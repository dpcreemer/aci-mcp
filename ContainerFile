FROM python:3.11-slim

WORKDIR /app

# Copy and install requirements
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy the full source
COPY . .

# When running in k8s/container, always use HTTP transport
ENV MCP_TRANSPORT=http
ENV PORT=8000
ENV HOST=0.0.0.0

# ACI details come from env vars injected in k8s (Secrets)
ENV ACI_ADDRESS=""
ENV ACI_USERNAME=""
ENV ACI_PASSWORD=""

EXPOSE 8000

CMD ["python", "aci-mcp.py"]
